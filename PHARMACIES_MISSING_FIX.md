# ูุดููุฉ ุนุฏู ุธููุฑ ุงูุตูุฏููุงุช ุนูู ุงูุฎุฑูุทุฉ - ุงูุชุญููู ูุงูุญู

## ุงููุดููุฉ:
ุญุชู ูุฅู ูุงูุช ุญุณุงุจุงุช ุงููุณุงูุฉ ุตุญูุญุฉ (50 ูู ูุญุฏ ุฃูุตู)ุ ุงูุตูุฏููุงุช ูุง ุชุธูุฑ ุนูู ุงูุฎุฑูุทุฉ.

## ุงูุณุจุจ ุงูุฌุฐุฑู:
ุงูุฏุงูุฉ `fetchPharmaciesWithLocation` ูู `app/actions/pharmacies.ts` ุชุจุญุซ ุนู:
1. ุตูุฏููุงุช ูุนุชูุฏุฉ (`is_verified = true`)
2. ูุน ูุนูููุงุช ูููุน ุตุญูุญุฉ (latitude, longitude)
3. ูุฏููุง ุงุดุชุฑุงูุงุช ูุดุทุฉ ููุนุงูุฉ (`status = 'active'` ูุน `end_date > now()`)

**ููู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุง ุชุญุชูู ุนูู ุฃู ุตูุฏููุงุช!** โ

## ุงูุชุดุฎูุต:

### 1. ุฌุฏุงูู ูุงุนุฏุฉ ุงูุจูุงูุงุช:
- `profiles` - ุญุณุงุจุงุช ุงููุณุชุฎุฏููู (ูุณุชุฎุฏููู ุนุงุฏููู ูุตูุงุฏูุฉ ูุฅุฏุงุฑููู)
- `pharmacy_profiles` - ุจูุงูุงุช ุงูุตูุฏููุงุช ุงูุฅุถุงููุฉ (ูุน ุงููููุน ูุงูุชุญูู)
- `subscriptions` - ุงุดุชุฑุงูุงุช ุงูุตูุฏููุงุช ุงููุดุทุฉ

### 2. ุณุจุจ ุงููุดููุฉ:
ูุง ุชูุฌุฏ ุจูุงูุงุช ุชุฌุฑูุจูุฉ ูู ุงูุฌุฏุงูู! ุนูุฏ ุฒูุงุฑุฉ ุงูุตูุญุฉ:
```typescript
const pharmacies = await fetchPharmaciesWithLocation(36.7538, 3.0588) // Returns []
```

ุงููุงุฆูุฉ ูุงุฑุบุฉ ูุฃู ุงูุงุณุชุนูุงู:
```sql
SELECT id, pharmacy_name, latitude, longitude, address, is_verified
FROM pharmacy_profiles
WHERE is_verified = true
  AND latitude IS NOT NULL
  AND longitude IS NOT NULL
```
ูุง ูุฑุฌุน ุฃู ูุชุงุฆุฌ!

## ุงูุญู:

### ุงูุฎุทูุฉ 1: ุชุดุบูู ุงูุณูุฑูุจุช ุงูุชุฌุฑูุจู
```bash
# ูู Supabase Dashboard:
# 1. ุงุฐูุจ ุฅูู SQL Editor
# 2. ูุณุฎ ูุญุชูู ุงูุณูุฑูุจุช: scripts/025_add_test_pharmacies.sql
# 3. ุดุบูู
```

ูุฐุง ุงูุณูุฑูุจุช ุณูุถูู:
- 5 ุตูุฏููุงุช ุชุฌุฑูุจูุฉ
- ูุน ููุงูุน ูุฑูุจุฉ ูู ุงูุฌุฒุงุฆุฑ (36.76ยฐ, 3.06ยฐ)
- ูุน ุงุดุชุฑุงูุงุช ูุดุทุฉ ุตุงูุญุฉ

### ุงูุฎุทูุฉ 2: ุงูุชุญูู
ุจุนุฏ ุชุดุบูู ุงูุณูุฑูุจุช:
```bash
# ุชุญุฏูุซ ุงูุตูุญุฉ
http://localhost:3002/home
```

### ุงูุฎุทูุฉ 3: ุชุตุญูุญ ุงูุจูุงูุงุช ุฅุฐุง ูุฒู ุงูุฃูุฑ
ุฅุฐุง ุฃุฑุฏุช ููุงูุน ุฃูุซุฑ ูุงูุนูุฉ:
```sql
UPDATE public.pharmacy_profiles
SET latitude = 36.7372, longitude = 3.0868
WHERE pharmacy_name = 'ุตูุฏููุฉ ุงูุฃูู';

-- ุชูุฑุงุฑ ููู ุตูุฏููุฉ ุจุฅุญุฏุงุซูุงุช ูุฎุชููุฉ
```

## ุงูููุฏ ุงูุชุดุฎูุตู ุงููุถุงู:

ุชู ุฅุถุงูุฉ logging ูู 3 ููุงุท:

### 1. ูู `app/actions/pharmacies.ts`:
```typescript
console.log(`โ Final result: ${filteredPharmacies.length} pharmacies returned`)
console.log("๐ท Pharmacies to return:", filteredPharmacies.map(...))
```

### 2. ูู `components/home/pharmacy-map.tsx`:
```typescript
console.log("๐ท PharmacyMap received initialPharmacies:", initialPharmacies)
```

### 3. ูู `components/home/interactive-map.tsx`:
```typescript
console.log("๐ท InteractiveMap received pharmacies:", pharmaciesToShow.length)
console.log("๐ Pharmacy details:", pharmaciesToShow.map(...))
```

ุงุฐูุจ ุฅูู Browser DevTools (F12) ูุชุฑู ุงูุณุฌูุงุช.

## ุงูุฎุทูุงุช ุงูุชุงููุฉ ุจุนุฏ ุฅุถุงูุฉ ุงูุจูุงูุงุช:

1. โ ุตูุฏููุงุช ุณุชุธูุฑ ุนูู ุงูุฎุฑูุทุฉ
2. โ ุงููุณุงูุงุช ุณุชุญุณุจ ุจุดูู ุตุญูุญ (< 50 ูู)
3. โ ุณุชุฑู ุนูุงูุงุช ุงูุตูุฏููุงุช ุจุฃููุงู ูุฎุชููุฉ (ุฃุฎุถุฑ = ููุชูุญุ ุฃุญูุฑ = ูุบูู)
4. โ ุนูุฏ ุงูููุฑ ุนูู ุตูุฏููุฉุ ุณุชุธูุฑ ุงูุทุฑูู ุนูู ุงูุฎุฑูุทุฉ

## ููุงุญุธุงุช ูููุฉ:

1. **ุงูุจูุงูุงุช ุงูุชุฌุฑูุจูุฉ ูุคูุชุฉ** - ุงุณุชุฎุฏููุง ููุชุทููุฑ ููุท
2. **ุงูุฅุญุฏุงุซูุงุช** - ุงูุณูุฑูุจุช ูููุฏ ุฅุญุฏุงุซูุงุช ุนุดูุงุฆูุฉ ูุฑูุจุฉ ูู ุงูุฌุฒุงุฆุฑ
3. **ุงูุงุดุชุฑุงูุงุช** - ุตุงูุญุฉ ููุฏุฉ 30 ููู ูู ุงูุขู
4. **ุญูููู vs ุชุฌุฑูุจู** - ูู ุงูุฅูุชุงุฌุ ุณุชุฃุชู ุงูุจูุงูุงุช ูู ุชุณุฌูู ุตูุงุฏูุฉ ุญูููููู
