# ๐ฏ ุชุญุฏูุซ ูุธุงู ุชุตููุฉ ุงููุณุงูุฉ - Distance Filter System Update

## โ ูุง ุชู ุฅูุฌุงุฒู:

### 1๏ธโฃ **ุฅุถุงูุฉ ููุชุฑ ุงููุณุงูุฉ ูู ุงูุฎุฑูุทุฉ (Pharmacy Map)**
**ุงูููู**: `components/home/pharmacy-map.tsx`

#### ุงูููุฒุงุช ุงููุถุงูุฉ:
- โ **Slider ูููุณุงูุฉ** (30 ูู - 100 ูู)
- โ ุนุฑุถ ุงููุณุงูุฉ ุงููุฎุชุงุฑุฉ ุจูุถูุญ
- โ ุชุตููุฉ ุงูุตูุฏููุงุช ุชููุงุฆูุงู ุญุณุจ ุงููุณุงูุฉ
- โ ููู ุชุตููุฉ ุดุงูู ูุซู **Facebook Marketplace**

```tsx
// ูุซุงู ุงูู State
const [maxDistance, setMaxDistance] = useState<number>(50)

// ุชุตููุฉ ุงูุตูุฏููุงุช ุญุณุจ ุงููุณุงูุฉ
filtered = filtered.filter((p) => (p.distance || 0) <= maxDistance)
```

**ุงูุชุตููู**:
- ุดุฑูุท ุชูุฑูุฑ ุณูุณ (Range Slider)
- ุนุฑุถ ุงููููุฉ ุงูุญุงููุฉ ุจุดูู ุจุงุฑุฒ
- ุญุฏ ุฃุฏูู 30 ููุ ุญุฏ ุฃูุตู 100 ูู

---

### 2๏ธโฃ **ุฅุถุงูุฉ ููุชุฑ ุงููุณุงูุฉ ุนูุฏ ุงุฎุชูุงุฑ ุงูุตูุฏููุงุช**
**ุงูููู**: `app/prescriptions/select-pharmacies/page.tsx`

#### ุงูููุฒุงุช ุงููุถุงูุฉ:
- โ **Slider ูุชุญุฏูุฏ ูุทุงู ุงูุจุญุซ** (30-100 ูู)
- โ ุชุตููุฉ ุงูุตูุฏููุงุช ุญุณุจ ุงููุณุงูุฉ ุงููุฎุชุงุฑุฉ
- โ ุนุฑุถ ุงูุนุฏุฏ ุงููููุชุฑ (ูุซู: "ูุฌุฏูุง 5 ุตูุฏููุงุช ูู ุฃุตู 12")
- โ ุฅููุงููุฉ ุชุบููุฑ ุงููุณุงูุฉ ูุจู ุงูุฅุฑุณุงู

```tsx
// State ุฌุฏูุฏ
const [maxDistance, setMaxDistance] = useState<number>(50)

// ุงูุชุตููุฉ
{pharmacies.filter(p => p.distance <= maxDistance).map((pharmacy) => (
  // ุนุฑุถ ุงูุตูุฏููุงุช ุงููููุชุฑุฉ ููุท
))}
```

**ุงูุชูุซูู ูู ุงูุฑุฃุณ**:
```
ุงุฎุชุฑ ุงููุณุงูุฉ ุงููุตูู ููุจุญุซ:
[======โ=======================]
30 ูู (ุฃุฏูู)  |  50 ูู  |  100 ูู
```

---

### 3๏ธโฃ **ุชุญุฏูุซ API ููุตูุฏููุงุช ุงููุฑูุจุฉ**
**ุงูููู**: `app/api/prescriptions/nearby-pharmacies/route.ts`

#### ุงูุชุญุฏูุซุงุช:
- โ ูุจูู parameter ุฌุฏูุฏ: `maxDistance`
- โ **ุงูุญุฏ ุงูุฃุฏูู 30 ูู** (ููุฑูุถ ุจุฑูุฌูุงู)
- โ **ุงูุญุฏ ุงูุฃูุตู 100 ูู**
- โ ุฅุฑุฌุงุน `maxDistance` ูู ุงูุงุณุชุฌุงุจุฉ

```typescript
// ูุจู
const nearbyPharmacies = pharmacies
  .filter((p: any) => p.distance <= 50)

// ุจุนุฏ
const MAX_DISTANCE = Math.max(30, Math.min(maxDistance || 50, 100))
const nearbyPharmacies = pharmacies
  .filter((p: any) => p.distance <= MAX_DISTANCE)
```

---

### 4๏ธโฃ **ุชุญุฏูุซ ุงูุฎุฑูุทุฉ ุงูุชูุงุนููุฉ**
**ุงูููู**: `components/home/interactive-map.tsx`

#### ุงูููุฒุงุช:
- โ ุนุฑุถ ุนุฏุฏ ุงูุตูุฏููุงุช ุงููููุชุฑุฉ ูู ุงูุฃุนูู
- โ ููุงุณ ุงููุณุงูุฉ ูุน ุฏูุฉ ุนุงููุฉ (2 ุฑูู ุนุดุฑู)
- โ ุนุฑุถ ุงููุณุงูุฉ ูู popup ุงูุตูุฏููุฉ

```tsx
๐ ุงููุณุงูุฉ: 12.45 ูู
```

---

## ๐ ุณูุฑ ุงูุนูู ุงูุฌุฏูุฏ:

### ุนูุฏ ุฏุฎูู ุงููุณุชุฎุฏู ููุฎุฑูุทุฉ:
```
1. ุชุญููู ุฌููุน ุงูุตูุฏููุงุช
2. ุงูุญุฏ ุงูุงูุชุฑุงุถู ูููุณุงูุฉ: 50 ูู
3. ุนุฑุถ ุงูุตูุฏููุงุช ุถูู 50 ูู
4. ุฅููุงููุฉ ุชุบููุฑ ุงููุณุงูุฉ ูู ุฎูุงู ุงูู Slider
5. ุชุญุฏูุซ ุงูุฎุฑูุทุฉ ุชููุงุฆูุงู
```

### ุนูุฏ ุงุฎุชูุงุฑ ุงูุตูุฏููุงุช ููุฅุฑุณุงู:
```
1. ุชุญููู ุงูุตูุฏููุงุช ุจูุณุงูุฉ ูุตูู 100 ูู
2. ุงูุญุฏ ุงูุงูุชุฑุงุถู: 50 ูู
3. ุงููุณุชุฎุฏู ูุฎุชุงุฑ ุงููุณุงูุฉ ุงููุฑุบูุจุฉ
4. ูุชู ุชุตููุฉ ุงูุตูุฏููุงุช ุญุณุจ ุงููุณุงูุฉ
5. ุงููุณุชุฎุฏู ูุฎุชุงุฑ ุงูุตูุฏููุงุช ุงููููุชุฑุฉ ููุท
6. ุงูุฅุฑุณุงู ูุชู ููุท ููุตูุฏููุงุช ุงููุฎุชุงุฑุฉ ูุงููููุชุฑุฉ
```

---

## ๐ ุงูุญุฏูุฏ ุงููุทุจูุฉ:

| ุงูุญุฏ | ุงููููุฉ | ุงูููุงุญุธุฉ |
|-----|--------|---------|
| **ุงูุญุฏ ุงูุฃุฏูู** | 30 ูู | โ ููุฑูุถ ุจุฑูุฌูุงู ูู API |
| **ุงูุญุฏ ุงูุฃูุตู** | 100 ูู | โ ุงูุญุฏ ุงูุฃูุตู ููุจุญุซ |
| **ุงูุงูุชุฑุงุถู** | 50 ูู | โ ุงูุฎูุงุฑ ุงูุฃููู |

---

## ๐จ ูุงุฌูุฉ ุงููุณุชุฎุฏู:

### ูู ุงูุฎุฑูุทุฉ:
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ๐ ุงุจุญุซ ุนู ุตูุฏููุฉ...             โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ [ุชุตููุฉ] [ุญุณุจ...] [ูุณุญ]          โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ ุงููุณุงูุฉ ุงููุตูู:                  โ
โ [==================โ==========]  โ
โ 30      50 ูู      100          โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ ุญุงูุฉ ุงูุตูุฏููุฉ:                   โ
โ [ุงููู] [ููุชูุญ] [ูุบูู]          โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### ุนูุฏ ุงูุฅุฑุณุงู:
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ุงุฎุชุฑ ุงููุณุงูุฉ ุงููุตูู ููุจุญุซ:       โ
โ [==================โ==========]  โ
โ 30 ูู (ุฃุฏูู)  50 ูู  100 ูู    โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ โ ูุฌุฏูุง 5 ุตูุฏููุงุช ูู ุฃุตู 12   โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ [ุตูุฏููุฉ 1] โ 12.5 ูู            โ
โ [ุตูุฏููุฉ 2] โ 18.3 ูู            โ
โ ...                             โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## ๐งช ุงุฎุชุจุงุฑ ุงููุธุงู:

### ุงุฎุชุจุงุฑ 1: ุงูุญุฏ ุงูุฃุฏูู
```javascript
// ูุฌุจ ุฃู ูููู ุงูู Slider ูุจุฏุฃ ูู 30 ูู
minDistance = 30 โ
```

### ุงุฎุชุจุงุฑ 2: ุงูุญุฏ ุงูุฃูุตู
```javascript
// ูุฌุจ ุฃู ูููู ุงูู Slider ูุตู ุฅูู 100 ูู
maxDistance = 100 โ
```

### ุงุฎุชุจุงุฑ 3: ุงูุชุตููุฉ ุงูุฏููุงููููุฉ
```javascript
// ุนูุฏ ุชุญุฑูู ุงูู Sliderุ ูุฌุจ ุชุญุฏูุซ ุงูุตูุฏููุงุช ุงููุนุฑูุถุฉ ููุฑุงู
user moves slider to 30km โ show only pharmacies โค 30km โ
```

### ุงุฎุชุจุงุฑ 4: ุงูุฅุฑุณุงู ุงููุญุฏูุฏ
```javascript
// ุงูุฅุฑุณุงู ูุฌุจ ุฃู ูููู ููุท ููุตูุฏููุงุช ุงููููุชุฑุฉ
selected pharmacy distance โค maxDistance โ
```

---

## ๐พ ุงููููุงุช ุงููุญุฏุซุฉ:

| ุงูููู | ุงูุชุญุฏูุซ | ุงูุชุงุฑูุฎ |
|------|--------|--------|
| `components/home/pharmacy-map.tsx` | โ ุฅุถุงูุฉ ููุชุฑ ุงููุณุงูุฉ | 6/12/2025 |
| `app/prescriptions/select-pharmacies/page.tsx` | โ ููุชุฑ ุงููุณุงูุฉ ุนูุฏ ุงูุฅุฑุณุงู | 6/12/2025 |
| `app/api/prescriptions/nearby-pharmacies/route.ts` | โ ุชุญุฏูุซ API + ุญุฏ ุฃุฏูู 30 | 6/12/2025 |
| `components/home/interactive-map.tsx` | โ ุนุฑุถ ูุนูููุงุช ุงูููุชุฑ | 6/12/2025 |

---

## ๐ ุงูููุฒุงุช ุงูุฅุถุงููุฉ:

โ **ุญูุธ ุชูุถููุงุช ุงููุณุชุฎุฏู** (ุงุฎุชูุงุฑู)
โ **ุนุฑุถ ุงูุฅุญุตุงุฆูุงุช** (ุนุฏุฏ ุงูุตูุฏููุงุช ุงููููุชุฑุฉ)
โ **ุชุญุณููุงุช ุงูุฃุฏุงุก** (ุชุตููุฉ ุงูุนููู ููุท)
โ **ุฑุณุงุฆู ุฅุฑุดุงุฏูุฉ ูุงุถุญุฉ**

---

## ๐ ููุงุญุธุงุช ูููุฉ:

1. **ุงูุญุฏ ุงูุฃุฏูู 30 ูู** ููุฑูุถ ุจุฑูุฌูุงู ูู API ูุถูุงู ุนุฏู ุชุฌุงูุฒู
2. **ุงูุชุตููุฉ ุชุชู ุนูู ุงูุนููู** ูุชุญุณูู ุงูุฃุฏุงุก
3. **API ููุฑุฌุน ุฌููุน ุงูุตูุฏููุงุช** ุญุชู 100 ูู ูููุฑููุฉ
4. **ุงูุงูุชุฑุงุถู 50 ูู** ููุชูุงุฒู ุจูู ุงูุฎูุงุฑุงุช ุงููุชุงุญุฉ

---

**ุชู ุงูุฅูุฌุงุฒ ุจูุฌุงุญ! โ**

